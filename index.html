<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6 flex flex-col gap-8">

<div class="flex flex-col gap-2">
    <div>
        <h1 class="text-xl font-semibold text-gray-900">Textarea Grid</h1>
        <p class="mt-2 text-sm text-gray-700">Lorem ipsum dolor sit amet, consetetur sadipscing elitr.</p>
    </div>

    <div>
        <div class="border shadow inline-block">
            <div style="font-size: 0;" class="whitespace-nowrap">
                <textarea data-row="1" data-resize-group="textareas" data-col="1" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="1" data-resize-group="textareas" data-col="2" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="1" data-resize-group="textareas" data-col="3" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="1" data-resize-group="textareas" data-col="4" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="1" data-resize-group="textareas" data-col="5" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
            </div>
            <div style="font-size: 0;" class="whitespace-nowrap">
                <textarea data-row="2" data-resize-group="textareas" data-col="1" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="2" data-resize-group="textareas" data-col="2" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="2" data-resize-group="textareas" data-col="3" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="2" data-resize-group="textareas" data-col="4" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="2" data-resize-group="textareas" data-col="5" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
            </div>
            <div style="font-size: 0;" class="whitespace-nowrap">
                <textarea data-row="3" data-resize-group="textareas" data-col="1" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="3" data-resize-group="textareas" data-col="2" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="3" data-resize-group="textareas" data-col="3" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="3" data-resize-group="textareas" data-col="4" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="3" data-resize-group="textareas" data-col="5" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
            </div>
            <div style="font-size: 0;" class="whitespace-nowrap">
                <textarea data-row="4" data-resize-group="textareas" data-col="1" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="4" data-resize-group="textareas" data-col="2" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="4" data-resize-group="textareas" data-col="3" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="4" data-resize-group="textareas" data-col="4" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="4" data-resize-group="textareas" data-col="5" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
            </div>
            <div style="font-size: 0;" class="whitespace-nowrap">
                <textarea data-row="5" data-resize-group="textareas" data-col="1" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="5" data-resize-group="textareas" data-col="2" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="5" data-resize-group="textareas" data-col="3" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="5" data-resize-group="textareas" data-col="4" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
                <textarea data-row="5" data-resize-group="textareas" data-col="5" class="w-48 h-16 border resize text-sm pt-1 pl-2">Lorem ipsum</textarea>
            </div>
        </div>
    </div>
</div>

<div class="flex flex-col gap-2">
    <div>
        <h1 class="text-xl font-semibold text-gray-900">Div Grid</h1>
        <p class="mt-2 text-sm text-gray-700">Lorem ipsum dolor sit amet, consetetur sadipscing elitr.</p>
    </div>

    <div>
        <div class="border shadow inline-block">
            <div style="font-size: 0;" class="whitespace-nowrap">
                <div data-row="1" data-resize-group="divs" data-col="1" class="border resize bg-white overflow-hidden inline-block" style="width: 240px; height: 180px;"></div>
                <div data-row="1" data-resize-group="divs" data-col="2" class="border resize bg-white overflow-hidden inline-block" style="width: 240px; height: 180px;">
                    <div class="flex justify-center items-center h-full w-full">
                        <img src="https://dummyimage.com/240x180/acc/aaa" alt="" width="100%" height="100%">
                    </div>
                </div>
                <div data-row="1" data-resize-group="divs" data-col="3" class="border resize bg-white overflow-hidden inline-block" style="width: 240px; height: 180px;"></div>
                <div data-row="1" data-resize-group="divs" data-col="4" class="border resize bg-white overflow-hidden inline-block" style="width: 240px; height: 180px;"></div>
                <div data-row="1" data-resize-group="divs" data-col="5" class="border resize bg-white overflow-hidden inline-block" style="width: 240px; height: 180px;"></div>
            </div>
                
            <div style="font-size: 0;" class="whitespace-nowrap">
                <div data-row="2" data-resize-group="divs" data-col="1" class="border resize bg-white overflow-hidden inline-block" style="width: 240px; height: 180px;"></div>
                <div data-row="2" data-resize-group="divs" data-col="2" class="border resize bg-white overflow-hidden inline-block" style="width: 240px; height: 180px;">
                    <div class="flex justify-center items-center h-full w-full">
                        <img src="https://dummyimage.com/240x180/acc/aaa" alt="" width="100%" height="100%">
                    </div>
                </div>
                <div data-row="2" data-resize-group="divs" data-col="3" class="border resize bg-white overflow-hidden inline-block" style="width: 240px; height: 180px;"></div>
                <div data-row="2" data-resize-group="divs" data-col="4" class="border resize bg-white overflow-hidden inline-block" style="width: 240px; height: 180px;"></div>
                <div data-row="2" data-resize-group="divs" data-col="5" class="border resize bg-white overflow-hidden inline-block" style="width: 240px; height: 180px;"></div>
            </div>
    
            <div style="font-size: 0;" class="whitespace-nowrap">
                <div data-row="3" data-resize-group="divs" data-col="1" class="border resize bg-white overflow-hidden inline-block" style="width: 240px; height: 180px;"></div>
                <div data-row="3" data-resize-group="divs" data-col="2" class="border resize bg-white overflow-hidden inline-block" style="width: 240px; height: 180px;">
                    <div class="flex justify-center items-center h-full w-full">
                        <img src="https://dummyimage.com/240x180/acc/aaa" alt="" width="100%" height="100%">
                    </div>
                </div>
                <div data-row="3" data-resize-group="divs" data-col="3" class="border resize bg-white overflow-hidden inline-block" style="width: 240px; height: 180px;"></div>
                <div data-row="3" data-resize-group="divs" data-col="4" class="border resize bg-white overflow-hidden inline-block" style="width: 240px; height: 180px;"></div>
                <div data-row="3" data-resize-group="divs" data-col="5" class="border resize bg-white overflow-hidden inline-block" style="width: 240px; height: 180px;"></div>
            </div>
        </div>
    </div>
</div>

  <script>
      function findParent(elem, selector) {
          return (!elem || elem.matches(selector)) ? elem : findParent(elem.parentElement, selector)
      }

    window.onerror = message => {
        console.log(message)
    };

    const gridResizeObserver = new ResizeObserver(entries => {
        const entry = entries[0]
        const target = entry.target

        // equal height
        if (target.dataset.row) {
            const neighbours = Array.from(
                document.querySelectorAll('[data-resize-group="' + target.dataset.resizeGroup + '"][data-row="' + target.dataset.row + '"]')
            ).filter(e => e !== target)

            for (neighbour of neighbours) {
                neighbour.style.height = target.style.height
            }
        }

        // equal width
        if (target.dataset.col) {
            const neighbours = Array.from(
                document.querySelectorAll('[data-resize-group="' + target.dataset.resizeGroup + '"][data-col="' + target.dataset.col + '"]')
            ).filter(e => e !== target)

            for (neighbour of neighbours) {
                neighbour.style.width = target.style.width
            }
        }
    })

    document.addEventListener('mousedown', event => {
        const resizeGroupTarget = findParent(event.target, '[data-resize-group]')
        if (resizeGroupTarget) {
            gridResizeObserver.observe(resizeGroupTarget)
        }
    })

    document.addEventListener('mouseup', () => {
        console.log('disable resize-observer.')
        gridResizeObserver.disconnect()
    })
  </script>
</body>
</html>